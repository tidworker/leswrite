<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Les Write</title>
    <style>
        body, html { 
            margin: 0; 
            padding: 0; 
            overflow: hidden; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            height: 100%; 
            flex-direction: column;
            background-color: white; /* 添加背景色以提高可視性 */
        }
        #container {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        #grid {
            display: grid;
            grid-template-columns: repeat(100, 4px); /* 100個單元格，每個寬度4px */
            grid-template-rows: repeat(100, 4px); /* 100個單元格，每個高度4px */
        }
        .cell {
            width: 4px;
            height: 4px;
            background-color: white; /* 單元格的初始背景色設為白色 */
            box-sizing: border-box;
        }
        .letter {
            background-color: #d3d3d3; /* 淺灰色，用於預填字母部分 */
        }
        #progressbar {
            width: 90%;
            height: 20px;
            background-color: #eee;
            margin-top: 20px;
        }
        #progress {
            height: 100%;
            width: 0%;
            background-color: red;
        }
        #restart, #play-audio {
            padding: 1px 1px;
            font-size: 16px;
            background-color: white;
            color: white;
            border: none;
            border-radius: 40px;
            cursor: pointer;
            margin-top: 20px;
        }
        #rating {
            font-size: 24px;
            color: #333;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <img src="leswrite.png">
    <div id="rating"></div>
    <div id="container">
    <div id="grid"></div>
    <div id="progressbar"><div id="progress"></div></div>
    <img src="a.png">
    <button id="restart" onclick="restartGame()"><img src="restart.png"></button>
    <button id="play-audio" onclick="playAudio()"><img src="play.png"></button>
    <br>
    <img src="logo.png">


</div>
<audio id="audio" src="a.mp3"></audio> <!-- 將 audio-file.mp3 替換為您的音訊文件 -->
<script>
    const grid = document.getElementById('grid');
    const cells = [];
    const patternA = [
        // 省略的01矩陣部分
                '0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000',
                '0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000',
                '0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000',
                '0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000',
                '0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000',
                '0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000',
                '0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000',
                '0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000',
                '0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000',
                '0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000',
                '0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000',
                '0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000',
                '0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000',
                '0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000',
                '0000000000000000000000000000000000000001111111110000000000000000000000000000000000000000000000000000',
                '0000000000000000000000000000000000000011111111111100000000000000000000000000000000000000000000000000',
                '0000000000000000000000000000000000000111111111111100000000000000000000000000000000000000000000000000',
                '0000000000000000000000000000000000000111111111111100000000000000000000000000000000000000000000000000',
                '0000000000000000000000000000000000000111111111111000000000000000000000000000000000000000000000000000',
                '0000000000000000000000000000000000000111111111111000000000000000000000000000000000000000000000000000',
                '0000000000000000000000000000000000000111111111111000000000000000000011111110000000000000000000000000',
                '0000000000000000000000000000000000000111111111110000000000000111111111111110000000000000000000000000',
                '0000000000000000000111000000000000001111111111110000111111111111111111111110000000000000000000000000',
                '0000000000000000000111111111111111111111111111111111111111111111111111111110000000000000000000000000',
                '0000000000000000000111111111111111111111111111111111111111111111111111111110000000000000000000000000',
                '0000000000000000000111111111111111111111111111111111111111111111111111111110000000000000000000000000',
                '0000000000000000000111111111111111111111111111111111111111111111111111111110000000000000000000000000',
                '0000000000000000000111111111111111111111111111111111111111111111111111111110000000000000000000000000',
                '0000000000000000000111111111111111111111111111111111111111111111111111111110000000000000000000000000',
                '0000000000000000000111111111111111111111111111111111111111111111111111111110000000000000000000000000',
                '0000000000000000000111111111111111111111111111111111111111111111111111111110000000000000000000000000',
                '0000000000000000000111111111111111111111111111111111111111111111111111000000000000000000000000000000',
                '0000000000000000000111111111111111111111111111111111111111100000000000000000000000000000000000000000',
                '0000000000000000000011111111111111111111111111110000000000001100000000000000000000000000000000000000',
                '0000000000000000000000000000000000001111111111100000000000011111100000000000000000000000000000000000',
                '0000000000000000000000000000000000001111111111000000000000011111111110000000000000000000000000000000',
                '0000000000000000000000000000000000001111111111000000000000111111111111000000000000000000000000000000',
                '0000000000000000000000000000000000011111111111000000000000111111111111000000000000000000000000000000',
                '0000000000000000000000000000000000011111111111000011111111111111111110000000000000000000000000000000',
                '0000000000000000000000000000000000011111111111111111111111111111111110000000000000000000000000000000',
                '0000000000000000000000000000000000011111111111111111111111111111111111000000000000000000000000000000',
                '0000000000000000000000000000000000011111111111111111111111111111111111111000000000000000000000000000',
                '0000000000000000000000000000000000111111111111111111111111111111111111111100000000000000000000000000',
                '0000000000000000000000000000000001111111111111111111111111111111111111111111100000000000000000000000',
                '0000000000000000000000000000000011111111111111111111111111111111111111111111110000000000000000000000',
                '0000000000000000000000000000011111111111111111111111111111111111111111111111111000000000000000000000',
                '0000000000000000000000000000111111111111111111111111111111111111111111111111111100000000000000000000',
                '0000000000000000000000000001111111111111111111111111111111111111111111111111111100000000000000000000',
                '0000000000000000000000000011111111111111111111110000001111111111111111111111111110000000000000000000',
                '0000000000000000000000000111111111111111111110000000001111111111111111111111111110000000000000000000',
                '0000000000000000000000001111111111111111111110000000011111111111100111111111111111000000000000000000',
                '0000000000000000000000011111111111111111111110000000111111111111100011111111111111100000000000000000',
                '0000000000000000000000111111111111111111111111000000111111111111000001111111111111100000000000000000',
                '0000000000000000000001111111111111111111111111000001111111111111000000111111111111100000000000000000',
                '0000000000000000000011111111111111111111111111000011111111111110000000011111111111110000000000000000',
                '0000000000000000000111111111111110111111111111000111111111111110000000011111111111110000000000000000',
                '0000000000000000000111111111111110011111111111000111111111111100000000011111111111110000000000000000',
                '0000000000000000000111111111111100011111111111000111111111111100000000001111111111110000000000000000',
                '0000000000000000001111111111111000011111111111001111111111111000000000001111111111110000000000000000',
                '0000000000000000011111111111110000011111111111111111111111110000000000001111111111110000000000000000',
                '0000000000000000011111111111100000011111111111111111111111110000000000001111111111110000000000000000',
                '0000000000000000111111111111000000001111111111111111111111110000000000001111111111110000000000000000',
                '0000000000000000111111111111000000001111111111111111111111100000000000001111111111110000000000000000',
                '0000000000000000111111111111000000001111111111111111111111000000000000011111111111110000000000000000',
                '0000000000000000111111111110000000001111111111111111111110000000000000111111111111110000000000000000',
                '0000000000000000111111111110000000001111111111111111111100000000000000111111111111110000000000000000',
                '0000000000000000111111111110000000001111111111111111111000000000000000111111111111100000000000000000',
                '0000000000000001111111111110000000001111111111111111110000000000000001111111111111100000000000000000',
                '0000000000000001111111111111000000111111111111111111110000000000000011111111111111000000000000000000',
                '0000000000000001111111111111000001111111111111111111100000000000000111111111111111000000000000000000',
                '0000000000000001111111111111111111111111111111111111000000000000001111111111111111000000000000000000',
                '0000000000000001111111111111111111111111111111111000000000000000011111111111111110000000000000000000',
                '0000000000000000111111111111111111111111111111111000000000000011111111111111111110000000000000000000',
                '0000000000000000111111111111111111111111111111111000000000011111111111111111111100000000000000000000',
                '0000000000000000111111111111111111111111111111111000000011111111111111111111111100000000000000000000',
                '0000000000000000011111111111111111111111111111111101111111111111111111111111110000000000000000000000',
                '0000000000000000011111111111111111111111111111111101111111111111111111111111110000000000000000000000',
                '0000000000000000011111111111111111111111111111111100111111111111111111111111100000000000000000000000',
                '0000000000000000001111111111111111111111111111111100011111111111111111111111000000000000000000000000',
                '0000000000000000000011111111111111111111111111111000011111111111111111111100000000000000000000000000',
                '0000000000000000000000111111111111100001111111111000011111111111111111110000000000000000000000000000',
                '0000000000000000000000001111111110000000111111111000001111111111111111100000000000000000000000000000',
                '0000000000000000000000000000000000000000001111100000000111111111111111000000000000000000000000000000',
                '0000000000000000000000000000000000000000000111000000000011111111111000000000000000000000000000000000',
                '0000000000000000000000000000000000000000000000000000000011111111000000000000000000000000000000000000',
                '0000000000000000000000000000000000000000000000000000000000110000000000000000000000000000000000000000',
                '0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000',
                '0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000',
                '0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000',
                '0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000',
                '0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000',
                '0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000',
                '0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000',
                '0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000',
                '0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000',
                '0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000',
                '0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000',
                '0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000',
                '0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000',
                '0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000'
    ];
    let totalLetters = 0;
    let coloredLetters = 0;
    let incorrectLetters = 0;
    let startTime;
    let timerStarted = false;
    let interval;

    function initializeGrid() {
        grid.innerHTML = ''; // 清空網格
        totalLetters = 0;
        coloredLetters = 0;
        incorrectLetters = 0;
        timerStarted = false;
        document.getElementById('progress').style.width = '0%';
        document.getElementById('rating').textContent = '';

        for (let i = 0; i < 100; i++) {
            cells[i] = [];
            for (let j = 0; j < 100; j++) {
                const cell = document.createElement('div');
                cell.className = 'cell';
                if (patternA[i] && patternA[i][j] === '1') {
                    cell.classList.add('letter');
                    totalLetters++;
                }
                cells[i][j] = cell;
                grid.appendChild(cell);
            }
        }
    }

    grid.addEventListener('touchstart', function(e) {
        if (!timerStarted) {
            startTime = new Date().getTime();
            timerStarted = true;
            startTimer();
        }
        handleTouch(e);
    }, { passive: false });

    grid.addEventListener('touchmove', handleTouch, { passive: false });

    function handleTouch(e) {
        e.preventDefault();
        paint(e.touches[0]);
    }

    function paint(touch) {
        const rect = grid.getBoundingClientRect();
        const x = Math.floor((touch.clientX - rect.left) / 4);
        const y = Math.floor((touch.clientY - rect.top) / 4);
        fillCircle(x, y, 6);
    }

    function fillCircle(cx, cy, radius) {
        for (let i = -radius; i <= radius; i++) {
            for (let j = -radius; j <= radius; j++) {
                if (i * i + j * j <= radius * radius) {
                    const nx = cx + j;
                    const ny = cy + i;
                    if (nx >= 0 && nx < 100 && ny >= 0 && ny < 100) {
                        if (cells[ny][nx].classList.contains('letter')) {
                            if (!cells[ny][nx].style.backgroundColor) {
                                cells[ny][nx].style.backgroundColor = '#000000';
                                coloredLetters++;
                            }
                        } else if (!cells[ny][nx].style.backgroundColor) {
                            cells[ny][nx].style.backgroundColor = 'white';
                            incorrectLetters++;
                        }
                    }
                }
            }
        }
    }

    function startTimer() {
        const duration = 2000; // 5秒倒計時
        interval = setInterval(() => {
            const elapsed = new Date().getTime() - startTime;
            const progress = (elapsed / duration) * 100;
            document.getElementById('progress').style.width = progress + '%';

            if (elapsed >= duration) {
                clearInterval(interval);
                finalScore();
            }
        }, 100);
    }

    function finalScore() {
        const scorePercentage = Math.round(((coloredLetters - incorrectLetters) / totalLetters) * 100);
        displayRating(scorePercentage);
    }

    function displayRating(score) {
        let rating = '';
        if (score <= 50) {
            rating = '0分 你！已經輸了';
        } else if (score <= 60) {
            rating = '★
59分 笑死！';
        } else if (score <= 70) {
            rating = '★★
70分 現在放棄，遊戲就結束了';
        } else {
            rating = '★★★
100分 你是我見過最拉風的男人';
        }
        document.getElementById('rating').textContent = rating;
    }

    function restartGame() {
        clearInterval(interval);
        initializeGrid();
    }

    function playAudio() {
        const audio = document.getElementById('audio');
        audio.play();
    }

    // 初始化遊戲
    initializeGrid();
</script>
</body>
</html>
